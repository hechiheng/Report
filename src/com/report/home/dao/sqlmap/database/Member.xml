<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">
<sqlMap namespace="home.Member">
	<typeAlias alias="member" type="com.report.manage.bean.Member"/>
	
	<select id="home.MemberDao.getMemberCount" parameterClass="string" resultClass="int">
	<![CDATA[
		select count(id) from t_member where accountid = #accountid#
	]]>
	</select>
	
	<insert id="home.MemberDao.insertMember" parameterClass="member">
		insert into t_member(accountid,password,sex,factname,idcard,birthday,address,qq,email,tel,regtime)
		values(#accountid#,#password#,#sex#,#factname#,#idcard#,#birthday#,#address#,#qq#,#email#,#tel#,UNIX_TIMESTAMP(NOW()))
	</insert>
	
	<select id="home.MemberDao.getMember" parameterClass="int" resultClass="member">
	<![CDATA[
		select a.id,a.accountid,a.factname,b.code_name sex,a.idcard,DATE_FORMAT(b.birthday,'%Y-%m-%d') birthday,
			a.qq,a.tel,a.email,a.address
		from t_member a,t_codelist b 
		where a.sex=b.code_value and b.code_type='sex' and id=#id# 
	]]>
	</select>
	
</sqlMap>